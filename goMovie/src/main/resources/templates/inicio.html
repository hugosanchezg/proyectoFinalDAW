<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoMovie!</title>
    <link rel="icon" href="../assets/img/favicon.ico" th:href="@{/assets/img/favicon.ico}"/>
    <link href="../static/css/style.css" th:href="@{/css/style.css}" rel="stylesheet" />
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <nav th:fragment="nav">
        <div class="nav-bar">
            <div class="menu">
                <span class="logo navLogo"> <a title="inicio" th:href="@{/inicio}" id="texttttt">
                	<h1 class="gomovie" id="tituloGo">üé¨GoMovie!</h1>
                </a></span>
            </div>

            <div class="menu">
                <ul class="nav-links">
                    <li><a th:href="@{/inicio}">Pel√≠culas</a></li>
                    <li><a th:href="@{/ofertas}">Ofertas</a></li>
                    <li><a th:href="@{/lista}">Tu lista</a></li>
                    <li><a th:href="@{/proximamente}">Pr√≥ximamente</a></li>
                </ul>
            </div>

            <div class="darkLight-searchBox">
            	<div class="searchBox">
                    <div class="searchToggle">
                        <i class='bx bx-x cancel bx-sm icons' style= "color:white" ></i>
                        <i class='bx bx-search search bx-sm icons' style= "color:white"></i>
                    </div>

                    <div class="search-field">
                    <div>
	                    <form class="lupa" th:action="@{/inicio}" method="get" >
	                        <input type="text" name="busqueda" placeholder="Search...">
	                        <button class="search-button" type="submit"><i class='bx bx-search icons'></i></button>
						</form>
					</div>
                    </div>
                </div>
            
                <div class="searchBox">
                    <a th:href="@{/perfil}" class="skr"><i class="bx bxs-user bx-sm icons" ></i></a>
                </div>

                <div class="searchBox">
                    <a th:href="@{/login?logout}"><i class='bx bx-log-out bx-sm icons'></i></a>
                </div>          
            </div>
        </div>
    </nav>

    <i class='bx bx-menu sidebarOpen' ></i>

    <div id="slideshow">
        <img th:src="@{/assets/img/img1.jpg}" onload="showSlide(slideIndex)">
        <img th:src="@{/assets/img/img2.jpg}">
        <img th:src="@{/assets/img/img3.jpg}">
        <img th:src="@{/assets/img/img4.jpg}">
        <img th:src="@{/assets/img/img5.jpg}">
        <img th:src="@{/assets/img/img6.jpg}">
        <div class="nav-buttons">
          <button class="prev-button" onclick="nextSlide(-1)">&lt;</button>
          <button class="next-button" onclick="nextSlide(1)">&gt;</button>
        </div>
    </div>

    <div class="textos">

        <h1>CAT√ÅLOGO</h1>

        <div id="separador">
            <hr class="red-separator">
        </div>

        <p>Desde pel√≠culas que no recordabas hasta tu pel√≠cula favorita de peque√±o...</p>

    </div>

    <div class="categorias" id="categorias">
        <div class="dropdown">

            <button class="button-category">‚ñº Categor√≠as</button>
            <div class="dropdown-content">
                <a th:href="@{/fantasia}"> Fantas√≠a </a>
				<a th:href="@{/drama}"> Drama </a>
				<a th:href="@{/romantico}"> Rom√°ntico </a>
				<a th:href="@{/comedia}"> Comedia </a>
				<a th:href="@{/infantil}"> Infantil </a>
				<a th:href="@{/accion}"> Acci√≥n </a>
            </div>
        </div>
        <a class="my-button" th:href="@{/todas}">Mostrar todas</a>
    </div>

    <main id="mainInicio">

        <div class="row" >
            <div class="producto" th:each="pelicula: ${peliculas}">
                <a class="tituloPelicula" th:href="@{/detalles/} + ${pelicula.id_pelicula}">
                	<img th:src="${pelicula.foto}" alt="Movie Poster">
                	<h2 id="h2Inicio" th:text="${pelicula.nombre}">Movie Title</h2>
                	<th:block th:each="tag : ${pelicula.tags}">
                		<a th:href="@{'/' + ${tag.nombre}}"><span th:text="' [ ' + ${tag.nombre} + ' ] '"></span></a>
                	</th:block>
                </a>
    
            </div>
        </div>

    </main>

    <hr class="separadoresPag" th:if = "${totalPages}">

    <div class = "row" th:if = "${totalPages}">

        <div class = "text-danger col-sm-3">
            Total Productos: <a th:text="${totalProductos}"></a>
        </div>

        <div class = "col-sm-3">
            <p th:if = "${totalPages > 1}">
                <a th:each="page : ${#numbers.sequence(0, totalPages - 1)}" th:href="@{/inicio/(busqueda=${busqueda}, page=${page}, pageSize=${pageSize})}" class="botonesPag">
                    <span th:text="${page + 1}"></span>&nbsp;
                </a>
                <span th:unless="${currentPage != i}">[[${i}]]</span>
            </p>
        </div>

        <div class = "col-sm-2" >
            <a class="botonesPag" th:if="${currentPage > 0}" th:href="@{/inicio/(busqueda=${busqueda}, page=${currentPage - 1}, pageSize=${pageSize})}"
               aria-label="Previous">Anterior
            </a>
        </div>

        <div class="col-sm-2">
            <a class="botonesPag" th:if="${currentPage < totalPages - 1}" th:href="@{/inicio/(busqueda=${busqueda}, page=${currentPage + 1}, pageSize=${pageSize})}"
               aria-label="Next"> Siguiente
            </a>
        </div>

    </div>

    <hr class="separadoresPag" th:if = "${totalPages}">

    <footer th:replace="index :: footer"></footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/script.js"></script>
</body>
</html>
